# Project: Rollplay - Development Update

```
commit        : b9c8bde ‚Üí 2f98199
release       : 0.11.0
release Date  : 2025 OCT 07
tag           : rollplay-0.11.0
```

---



## üéØ Domain-Driven Design (DDD) Refactor

#### Aggregate-Centric Architecture

- **REFACTORED:** The entire backend has been restructured using Domain-Driven Design principles with vertical slice architecture. Instead of organizing code by technical layers (controllers, services, repositories), the codebase is now organized by business domains (User, Campaign, Character). Each domain contains everything it needs - API endpoints, business logic, and data access - creating self-contained, cohesive modules that are easier to understand and maintain.

- **NEW:** Implemented repository pattern with dependency injection, ensuring clean separation between business logic and infrastructure. Domain logic remains pure and database-agnostic, with proper abstraction layers handling data persistence.

---

## üîß Backend Services Separation

#### Microservices Architecture

- **REFACTORED:** The monolithic backend has been decomposed into three specialized services: one for site-wide user and campaign management (PostgreSQL), one for active game sessions with real-time multiplayer (MongoDB), and one for authentication with magic links and JWT tokens (Redis). Each service can now scale independently based on demand, enabling cost-efficient deployment strategies.

- **ENHANCED:** NGINX reverse proxy intelligently routes requests to appropriate services, enabling independent deployment and horizontal scaling where needed.

---

## üë§ User Flow & Data Architecture

#### User Journey Foundations

- **NEW:** Established foundational infrastructure for complete user journey from account creation through campaign participation. Passwordless authentication via magic links is fully implemented and working. User and campaign management aggregates are in place with proper domain boundaries, though the full flow connecting campaigns to active game sessions requires additional work to distinguish game entities and implement the event-driven ETL for hot/cold storage transitions.

- **NEW:** Domain layer includes state machine logic for game lifecycle, business rules for state transitions, and session tracking to link PostgreSQL metadata with MongoDB active sessions. The architectural boundaries and data models are in place, with the actual data migration service and event bus remaining as future work.

---



## üêõ Technical Improvements

- **REFACTORED:** Eliminated circular dependencies and architectural anti-patterns. The new structure enforces clear dependency flow with domain layer having zero infrastructure dependencies. Type safety improved with schema validation at API boundaries, and consistent error handling across all layers.

- **ENHANCED:** Database migrations integrated with domain model evolution, supporting both runtime operations and schema changes with appropriate privilege separation.

---

This release establishes the architectural foundation necessary for Tabletop Tavern's evolution into a feature-rich, scalable platform. The Domain-Driven Design refactor provides clear boundaries for future development, microservices separation enables independent scaling and cost optimization, and foundational user flow demonstrates core business logic is in place. 
